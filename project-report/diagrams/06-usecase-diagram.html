<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Figure 6 - Use Case Diagram</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Times New Roman', Times, serif; background: #f5f5f5; padding: 20px; }
        .controls { text-align: center; margin-bottom: 15px; }
        .btn { background: #1e3a5f; color: #fff; border: none; padding: 8px 20px; font-size: 11pt; cursor: pointer; border-radius: 3px; margin: 0 5px; }
        .btn:hover { background: #2d4a6f; }
        
        .diagram-wrap { background: #fff; width: 580px; margin: 0 auto; padding: 18px 20px; border: 1px solid #ccc; }
        .diagram-title { text-align: center; font-size: 11pt; font-weight: bold; margin-bottom: 12px; }
        .section-title { font-size: 9pt; font-weight: bold; margin: 10px 0 6px 0; border-bottom: 1px solid #ccc; padding-bottom: 3px; }
        
        /* Use Case Layout */
        .uc-wrap { display: flex; gap: 15px; }
        .actors { display: flex; flex-direction: column; gap: 20px; align-items: center; width: 60px; }
        .actor { text-align: center; font-size: 7pt; }
        .stick { font-size: 20pt; line-height: 1; }
        
        .system-box { flex: 1; border: 2px solid #333; border-radius: 6px; padding: 10px; position: relative; }
        .system-label { position: absolute; top: -10px; left: 15px; background: #fff; padding: 0 6px; font-weight: bold; font-size: 8pt; }
        .usecases { display: flex; flex-direction: column; gap: 6px; }
        .uc { border: 1px solid #333; border-radius: 20px; padding: 5px 12px; font-size: 7.5pt; text-align: center; background: #f0f9ff; }
        
        .actors-right { display: flex; flex-direction: column; gap: 20px; align-items: center; width: 60px; }
        
        /* Connections (simplified labels) */
        .conn-note { font-size: 6.5pt; color: #555; text-align: center; margin-top: 8px; }
        
        /* Module Breakdown */
        .modules { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-top: 8px; }
        .mod { border: 1.5px solid #333; padding: 6px 8px; font-size: 7.5pt; background: #fff; }
        .mod-name { font-weight: bold; margin-bottom: 3px; }
        .mod-items { font-size: 7pt; color: #444; }
        
        /* DFD */
        .dfd { display: flex; align-items: center; justify-content: center; gap: 10px; margin-top: 8px; }
        .ext { border: 1px solid #333; padding: 5px 10px; font-size: 7.5pt; }
        .proc { border: 1.5px solid #333; border-radius: 50%; width: 70px; height: 70px; display: flex; align-items: center; justify-content: center; font-size: 7.5pt; text-align: center; background: #fef3c7; }
        .store { border-top: 1px solid #333; border-bottom: 1px solid #333; padding: 4px 10px; font-size: 7.5pt; background: #e0f2fe; }
        .dfd-arrow { font-size: 10pt; color: #555; }
        
        .caption { text-align: center; font-size: 10pt; margin-top: 12px; font-style: italic; }
    </style>
</head>
<body>
    <div class="controls">
        <button class="btn" onclick="downloadPNG()">‚¨á Download PNG</button>
        <button class="btn" onclick="window.print()">üñ® Print</button>
    </div>

    <div class="diagram-wrap" id="diagram">
        <div class="diagram-title">USE CASE & MODULE BREAKDOWN</div>

        <!-- Use Case Diagram -->
        <div class="section-title">A. Use Case Diagram</div>
        <div class="uc-wrap">
            <div class="actors">
                <div class="actor"><div class="stick">üßë‚Äçüíº</div>Admin</div>
                <div class="actor"><div class="stick">üßë‚Äçüè´</div>Faculty</div>
            </div>
            <div class="system-box">
                <span class="system-label">Attendro System</span>
                <div class="usecases">
                    <div class="uc">Manage Users</div>
                    <div class="uc">Configure Timetable</div>
                    <div class="uc">Approve Leaves</div>
                    <div class="uc">Assign Substitutions</div>
                    <div class="uc">Start Attendance Session</div>
                    <div class="uc">Unlock Biometric Device</div>
                    <div class="uc">View / Export Reports</div>
                    <div class="uc">Scan Fingerprint</div>
                    <div class="uc">View Own Attendance</div>
                </div>
            </div>
            <div class="actors-right">
                <div class="actor"><div class="stick">üßë‚Äçüéì</div>Student</div>
                <div class="actor"><div class="stick">üìü</div>ESP32</div>
            </div>
        </div>
        <div class="conn-note">Admin ‚Üí Manage Users, Timetable, Leaves, Substitutions, Reports | Faculty ‚Üí Sessions, Device, Reports | Student ‚Üí Scan, View | ESP32 ‚Üí Scan</div>

        <!-- Module Breakdown -->
        <div class="section-title">B. Module Breakdown</div>
        <div class="modules">
            <div class="mod"><div class="mod-name">Master Data</div><div class="mod-items">Faculty, Students, Classes, Subjects</div></div>
            <div class="mod"><div class="mod-name">Scheduling</div><div class="mod-items">Timetable slots, Allocations</div></div>
            <div class="mod"><div class="mod-name">Attendance</div><div class="mod-items">Sessions, Records, Sync</div></div>
            <div class="mod"><div class="mod-name">Leave & Subs</div><div class="mod-items">Leave requests, Substitution assignments</div></div>
            <div class="mod"><div class="mod-name">Reports</div><div class="mod-items">Summaries, Defaulters, Export</div></div>
            <div class="mod"><div class="mod-name">Biometric</div><div class="mod-items">Enrolment, Verification, Device Comm</div></div>
        </div>

        <!-- Context DFD -->
        <div class="section-title">C. Context-Level Data Flow Diagram (Level-0)</div>
        <div class="dfd">
            <div class="ext">Admin /<br/>Faculty</div>
            <div class="dfd-arrow">‚Üí</div>
            <div class="proc">Attendro<br/>System</div>
            <div class="dfd-arrow">‚Üî</div>
            <div class="store">Database</div>
            <div class="dfd-arrow">‚Üê</div>
            <div class="ext">ESP32 /<br/>Student</div>
        </div>

        <div class="caption">Figure 6: Use cases, module breakdown, and context DFD</div>
    </div>

    <script>
        function downloadPNG() {
            const el = document.getElementById('diagram');
            html2canvas(el, { scale: 3, backgroundColor: '#ffffff' }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'fig6-usecase-diagram.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            });
        }
    </script>
</body>
</html>
